# ~/.config/starship.toml

# Do not print a new line at the start of the prompt.
add_newline = false

# ==========================================
# Left Prompt Configuration
# Structure: [User@Host:Dir:Git:Jobs:Status] Char
# ==========================================
format = """
[\\[](white)\
$username\
$hostname\
$directory\
$git_branch\
$git_status\
${custom.git_dirty}\
$jobs\
$status\
[\\]](white) \
$character"""

# ==========================================
# Right Prompt Configuration
# Structure: [Battery:OS:Time]
# ==========================================
right_format = """
[\\[](white)\
$battery\
${custom.os_name}\
$time\
[\\]](white)"""

# --- Username ---
[username]
style_user = "red"
style_root = "red"
format = "[$user]($style)"
show_always = true

# --- Hostname ---
[hostname]
ssh_only = false
style = "cyan"
format = "@[$hostname]($style)"
trim_at = "."

# --- Directory ---
[directory]
style = "yellow"
format = ":[$path]($style)"
# Set to 0 to disable truncation (show full path)
truncation_length = 0
# Set to false to show the full path inside git repositories
truncate_to_repo = false
read_only = " ðŸ”’"

# --- Git Branch ---
# Matches original Zsh: :%F{blue}branch%f
[git_branch]
symbol = ""
style = "blue"
format = ":[$branch]($style)"

# --- Git Status ---
[git_status]
style = "yellow"
format = "([$ahead_behind]($style))"
ahead = "â‡¡"
behind = "â‡£"
diverged = "â‡•"
# Set these to empty just in case, though removing $all_status hides them.
modified = ""
untracked = ""
staged = ""
renamed = ""
deleted = ""

# Custom Module for the "Single Dirty Symbol"
# This runs a quick git check. If there is ANY change, it outputs "Dirty".
[custom.git_dirty]
# The command checks if git status has output.
# If yes (dirty), it echoes your desired symbol/text.
# You can change "Dirty âœ˜" to just "!" or "âš¡" if you prefer.
command = "git status --porcelain --ignore-submodules -unormal 2>/dev/null | grep -q . && echo 'M'"
# Only run inside git repos
when = "git rev-parse --is-inside-work-tree 2>/dev/null"
# Style it Red/Bold
style = "bold red"
format = " [$output]($style)"
# Optimized for performance (runs in shell)
shell = ["bash", "--noprofile", "--norc"]

# --- Background Jobs ---
[jobs]
symbol = "&"
style = "green"
format = ":[$number$symbol]($style)"

# --- Exit Status ---
[status]
disabled = false
style = "red"
format = ":[$status]($style)"

# --- Prompt Character ---
[character]
success_symbol = "[%](white)"
error_symbol = "[%](bold red)"
vimcmd_symbol = "[%](bold white)"

# --- Battery ---
# Matches original Zsh: %F{green}BAT%%%f:
[battery]
full_symbol = ""
charging_symbol = ""
discharging_symbol = ""
format = "[$percentage]($style):"
[[battery.display]]
threshold = 100
style = "green"

# --- OS Name (Custom Module) ---
[custom.os_name]
command = "uname"
format = "[$output]($style):"
when = "true"
style = "yellow"

# --- Time ---
# Matches original Zsh: %F{cyan}%D{%Y-%m-%d} %D{%H:%M:%S}%f
[time]
disabled = false
style = "cyan"
format = "[$time]($style)"
time_format = "%Y-%m-%d %H:%M:%S"
use_12hr = false
